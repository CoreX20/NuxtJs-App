(window.webpackJsonp=window.webpackJsonp||[]).push([[6,3],{315:function(e,t,n){var content=n(319);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(51).default)("f9df8d52",content,!0,{sourceMap:!1})},316:function(e,t,n){e.exports=n.p+"img/profile.db12f5e.png"},318:function(e,t,n){"use strict";n(315)},319:function(e,t,n){var r=n(50)((function(i){return i[1]}));r.push([e.i,".loading{align-items:center;display:flex;height:100vh;justify-content:center;width:100%}@keyframes circle-loading{to{transform:rotate(1turn)}}.loading span{animation:circle-loading 1.2s ease infinite;border:2px solid transparent;border-radius:50%;border-top-color:#fff;display:block;height:70px;width:70px}",""]),r.locals={},e.exports=r},320:function(e,t,n){"use strict";n.r(t);var r={},o=(n(318),n(22)),component=Object(o.a)(r,(function(){this._self._c;return this._m(0)}),[function(){var e=this._self._c;return e("div",{staticClass:"loading"},[e("span")])}],!1,null,null,null);t.default=component.exports},327:function(e,t,n){var content=n(341);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(51).default)("6c4786ec",content,!0,{sourceMap:!1})},340:function(e,t,n){"use strict";n(327)},341:function(e,t,n){var r=n(50)((function(i){return i[1]}));r.push([e.i,"a{cursor:pointer}",""]),r.locals={},e.exports=r},346:function(e,t,n){"use strict";n.r(t);n(140),n(53),n(45),n(88);var r=n(8),o=(n(44),n(15),n(52),n(33),n(336),n(43),n(86)),c=n.n(o),l=n(337),m=n.n(l),d=n(320),v=n(49);n(338);var f={components:{loadingCard:d.default,VideoPlayer:m.a},data:function(){return{movie:null,reviews:[],profile_image:null,user_id:null,comments:[],trailers:[],commentId:null,isEditingComment:!1,content:"",newContent:""}},fetch:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getSingleMovie();case 2:return t.next=4,e.getReviews();case 4:return t.next=6,e.getTrailers();case 6:return t.next=8,e.getCommentFromSupabase();case 8:return t.next=10,e.getUser();case 10:return t.next=12,e.getProfileImage();case 12:case"end":return t.stop()}}),t)})))()},computed:{visibleTrailers:function(){var e=this.trailers.filter((function(e){return"Trailer"===e.type}));return e.length>0?1===e.length?[e[0],this.trailers[0]]:e.slice(0,2):this.trailers.slice(0,2)}},fetchDelay:1e3,methods:{getSingleMovie:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var data,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return data=c.a.get("https://api.themoviedb.org/3/movie/".concat(e.$route.params.movieid,"?language=en-US"),{headers:{Authorization:"eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI2MWU0OGJmMTM5ZGEzZDBhYjEyMzYxNzUwMzYwYjUwZiIsIm5iZiI6MTY5MzkxNDA4OS42OTUwMDAyLCJzdWIiOiI2NGY3MTNlOTVmMmI4ZDAxMWI0Zjk4ODciLCJzY29wZXMiOlsiYXBpX3JlYWQiXSwidmVyc2lvbiI6MX0.Q1_U3P0DsSxUMMmOfiwZUKUoWjWEB6_UHE9EaQfwFzM",accept:"application/json"}}),t.next=3,data;case 3:n=t.sent,e.movie=n.data;case 5:case"end":return t.stop()}}),t)})))()},getReviews:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return data=c.a.get("https://api.themoviedb.org/3/movie/".concat(e.$route.params.movieid,"/reviews?language=en-US&page=1"),{headers:{Authorization:"eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI2MWU0OGJmMTM5ZGEzZDBhYjEyMzYxNzUwMzYwYjUwZiIsIm5iZiI6MTY5MzkxNDA4OS42OTUwMDAyLCJzdWIiOiI2NGY3MTNlOTVmMmI4ZDAxMWI0Zjk4ODciLCJzY29wZXMiOlsiYXBpX3JlYWQiXSwidmVyc2lvbiI6MX0.Q1_U3P0DsSxUMMmOfiwZUKUoWjWEB6_UHE9EaQfwFzM",accept:"application/json"}}),t.next=3,data;case 3:t.sent.data.results.forEach((function(t){e.reviews.push(t)}));case 5:case"end":return t.stop()}}),t)})))()},getTrailers:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return data=c.a.get("https://api.themoviedb.org/3/movie/".concat(e.$route.params.movieid,"/videos?language=en-US"),{headers:{Authorization:"eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI2MWU0OGJmMTM5ZGEzZDBhYjEyMzYxNzUwMzYwYjUwZiIsIm5iZiI6MTY5MzkxNDA4OS42OTUwMDAyLCJzdWIiOiI2NGY3MTNlOTVmMmI4ZDAxMWI0Zjk4ODciLCJzY29wZXMiOlsiYXBpX3JlYWQiXSwidmVyc2lvbiI6MX0.Q1_U3P0DsSxUMMmOfiwZUKUoWjWEB6_UHE9EaQfwFzM",accept:"application/json"}}),t.next=3,data;case 3:t.sent.data.results.forEach((function(t){e.trailers.push(t)}));case 5:case"end":return t.stop()}}),t)})))()},getProfileImage:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,data,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.auth.getSession();case 2:return n=t.sent,data=n.data,t.next=6,v.a.from("user").select("image_url").eq("id",data.session.user.id);case 6:r=t.sent,(o=r.data)&&null!==o&&(e.profile_image=o[0].image_url);case 9:case"end":return t.stop()}}),t)})))()},insertComment:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.from("reviews").insert([{movie_id:e.$route.params.movieid,content:e.content}]).select();case 2:if(n=t.sent,!(r=n.error)){t.next=6;break}throw r;case 6:return t.next=8,e.getCommentFromSupabase();case 8:e.content="";case 9:case"end":return t.stop()}}),t)})))()},getCommentFromSupabase:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.from("reviews").select("*").eq("movie_id",e.$route.params.movieid).order("created_at",{ascending:!1});case 2:n=t.sent,(r=n.data)&&(e.comments=r);case 5:case"end":return t.stop()}}),t)})))()},updateComment:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,data,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.a.from("reviews").update({content:t.newContent}).eq("id",e.id).select();case 2:r=n.sent,(data=r.data)&&(o=t.comments.findIndex((function(t){return t.id===e.id})),t.$set(t.comments,o,data[0]),t.newContent="",t.isEditingComment=!1);case 5:case"end":return n.stop()}}),n)})))()},deleteComment:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.commentId=e.id,n.next=3,v.a.from("reviews").delete().eq("id",t.commentId);case 3:if(r=n.sent,!(o=r.error)){n.next=7;break}throw o;case 7:t.comments=t.comments.filter((function(e){return e.id!==t.commentId}));case 8:case"end":return n.stop()}}),n)})))()},getUser:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.auth.getSession();case 2:n=t.sent,(data=n.data)&&(e.user_id=data.session.user.id);case 5:case"end":return t.stop()}}),t)})))()},editComment:function(e){this.isEditingComment=!this.isEditingComment,this.commentId=e.id,this.newContent=e.content}}},h=(n(340),n(22)),component=Object(h.a)(f,(function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("loadingCard"):t("div",[t("div",{staticClass:"py-5",style:{height:"580px",backgroundImage:"linear-gradient(rgba(0,1,22, 1), rgba(0,0,0, 0.6)), url(\n        'https://image.tmdb.org/t/p/w1280/".concat(e.movie.backdrop_path,"')"),backgroundSize:"cover",backgroundPosition:"center"}},[t("div",{staticClass:"container"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 col-md-6 col-lg-4"},[t("div",{staticClass:"movie-img"},[t("img",{staticStyle:{"max-height":"500px"},attrs:{src:"https://image.tmdb.org/t/p/w500/".concat(e.movie.poster_path),alt:""}})])]),e._v(" "),t("div",{staticClass:"col-12 col-md-6 col-lg-8"},[t("div",{staticClass:"movie-details text-white"},[t("h1",[e._v(e._s(e.movie.title))]),e._v(" "),t("blockquote",{staticClass:"blockquote"},[t("p",[e._v('"'+e._s(e.movie.tagline)+'"')]),e._v(" "),t("footer",{staticClass:"blockquote-footer"},[e._v(e._s(e.movie.title))])]),e._v(" "),t("p",[e._v(e._s(e.movie.overview))]),e._v(" "),t("p",[t("b",[e._v("Released:")]),e._v("\n              "+e._s(new Date(e.movie.release_date).toLocaleString("en-us",{month:"long",day:"numeric",year:"numeric"}))+"\n            ")]),e._v(" "),t("p",[t("b",[e._v("Duration:")]),e._v(" "+e._s(e.movie.runtime)+" minutes")]),e._v(" "),t("p",[t("b",[e._v("Genre:")]),e._v("\n              "+e._s(e.movie.genres.map((function(e){return e.name})).join(", "))+"\n            ")])])])])])]),e._v(" "),t("div",{staticClass:"container"},[t("div",{staticClass:"row justify-content-center mt-5"},[t("h1",{staticClass:"text-white"},[e._v("Trailers")]),e._v(" "),e._l(e.visibleTrailers,(function(n,r){return t("div",{key:r,staticClass:"col-12 col-lg-6 mb-3"},["YouTube"===n.site?t("div",{staticClass:"player"},[t("video-player",{attrs:{src:"https://www.youtube.com/embed/".concat(n.key,"?rel=0")}})],1):"Vimeo"===n.site?t("div",{staticClass:"player"},[t("video-player",{attrs:{src:"https://player.vimeo.com/video/".concat(n.key)}})],1):e._e()])}))],2),e._v(" "),t("div",{staticClass:"row d-flex justify-content-center mt-2"},[t("h1",{staticClass:"text-white"},[e._v("Comments")]),e._v(" "),t("div",{staticClass:"col-12"},[t("div",{staticClass:"card"},[t("div",{staticClass:"card-body p-4"},[t("div",{staticClass:"d-flex flex-start w-100"},[t("img",{staticClass:"rounded-circle shadow-1-strong me-3",attrs:{src:e.profile_image?"".concat(e.profile_image,"?time=").concat((new Date).getTime()):n(316),alt:"avatar",width:"65",height:"65"}}),e._v(" "),t("div",{staticClass:"w-100"},[t("h5",[e._v("Add a comment")]),e._v(" "),t("form",{on:{submit:function(t){return t.preventDefault(),e.insertComment.apply(null,arguments)}}},[t("div",{staticClass:"form-outline"},[t("label",{staticClass:"form-label",attrs:{for:"Comment"}},[e._v("Share Your Thoughts")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"}],staticClass:"form-control",attrs:{id:"Comment",rows:"4",placeholder:"Leave Your Comment"},domProps:{value:e.content},on:{input:function(t){t.target.composing||(e.content=t.target.value)}}})]),e._v(" "),t("div",{staticClass:"mt-3"},[t("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[e._v("\n                      Send\n                    ")])])])])])])])])]),e._v(" "),t("div",{staticClass:"row d-flex mt-5"},e._l(e.comments,(function(r){return t("div",{key:r.id,staticClass:"col-12"},[t("div",{staticClass:"d-flex flex-start mb-4"},[t("img",{staticClass:"rounded-circle shadow-1-strong me-3",attrs:{src:e.profile_image?"".concat(e.profile_image,"?time=").concat((new Date).getTime()):n(316),alt:"avatar",width:"65",height:"65"}}),e._v(" "),t("div",{staticClass:"card w-auto"},[t("div",{staticClass:"card-body p-4"},[t("div",{},[t("h5",[e._v(e._s(r.author))]),e._v(" "),t("p",{staticClass:"small"},[e._v("\n                  "+e._s(new Date(r.created_at).toLocaleString("en-us",{month:"long",day:"numeric",year:"numeric"}))+"\n                ")]),e._v(" "),e.isEditingComment&&e.commentId===r.id?t("div",[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newContent,expression:"newContent"}],staticClass:"form-control",attrs:{rows:"4"},domProps:{value:e.newContent},on:{input:function(t){t.target.composing||(e.newContent=t.target.value)}}}),e._v(" "),t("button",{staticClass:"btn btn-success",on:{click:function(t){return e.updateComment(r)}}},[e._v("\n                    Edit\n                  ")]),e._v(" "),t("a",{staticClass:"text-underline text-underline text-secondary",on:{click:function(t){return e.editComment(r)}}},[e._v("Cancel")])]):t("div",[t("p",[e._v("\n                    "+e._s(r.content)+"\n                  ")]),e._v(" "),e.user_id==r.user_id?t("div",[t("a",{staticClass:"fw-bold text-underline text-secondary",on:{click:function(t){return e.editComment(r)}}},[e._v("Edit")]),e._v(" "),t("a",{staticClass:"text-underline text-secondary",on:{click:function(t){return e.deleteComment(r)}}},[e._v("Delete")])]):e._e()])])])])])])})),0),e._v(" "),t("div",{staticClass:"row d-flex mt-5"},e._l(e.reviews,(function(r,o){return t("div",{key:o,staticClass:"col-12"},[t("div",{staticClass:"d-flex flex-start mb-4"},[t("img",{staticClass:"rounded-circle shadow-1-strong me-3",attrs:{src:r.author_details.avatar_path?"https://image.tmdb.org/t/p/w500/".concat(r.author_details.avatar_path):n(316),alt:"avatar",width:"65",height:"65"}}),e._v(" "),t("div",{staticClass:"card w-auto"},[t("div",{staticClass:"card-body p-4"},[t("div",{},[t("h5",[e._v(e._s(r.author))]),e._v(" "),t("p",{staticClass:"small"},[e._v("\n                  "+e._s(new Date(r.created_at).toLocaleString("en-us",{month:"long",day:"numeric",year:"numeric"}))+"\n                ")]),e._v(" "),t("p",[e._v("\n                  "+e._s(r.content)+"\n                ")])])])])])])})),0)])])}),[],!1,null,null,null);t.default=component.exports}}]);